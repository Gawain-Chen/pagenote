!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ontouchstart"in window?function(e){var t=e.touches[0]||e.changedTouches[0];return t?{x:t.pageX,y:t.pageY}:{x:0,y:0}}:function(e){return{x:(e=event||window.event).pageX||e.clientX+i().x,y:e.pageY||e.clientY+i().y}},o=document.documentElement||document.body;function i(){return{x:window.pageXOffset||o.scrollLeft||o.scrollLeft,y:window.pageYOffset||o.scrollTop||o.scrollTop}}t.gotoPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=setInterval(function(){var l=i(),u=l.x,a=l.y,s=e-u,c=t-a;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.scrollLeft=e,o.scrollTop=t,window.scrollTo(e,t)}(u+Math.floor(s/6),Math.floor(a+c/6));var d=i(),f=d.x;a===d.y&&u===f&&(clearInterval(r),"function"==typeof n&&n())},30);return r},t.getXY=r,t.hightLightElement=function(e,t,n){if(e&&void 0!==t){for(var r=e.querySelectorAll("b[data-highlight='easyshare']"),o=0;o<r.length;o++){var i=r[o];void 0===i.dataset.highlight&&i.dataset.originText!=t||(i.outerHTML=t)}if(!n){var l='<b data-highlight="easyshare" data-originText="'+t+'" data-originhtml="'+(t||e.innerHTML)+'" style="color:red">'+t+"</b>",u=new RegExp(t,"g");e.innerHTML=e.innerHTML.replace(u,l)}}},t.getViewPosition=function(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SHARENAME:"easyshare",WAITING:"WAITING",INITCOMPELETE:"INITCOMPELETE",RECORDING:"RECORDING",PAUSE:"PAUSE",RECORDED:"RECORDED",FINNISHED:"FINNISHED",REPLAYING:"REPLAYING",PLAYANDWAIT:"REPLAYINGANDWAITING",REPLAYFINISHED:"REPLAYFINISHED"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=i(n(3)),o=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=new r.default(e);return(0,o.default)(t),t}window.EasyShare=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;this.options=Object.assign({autoReplay:!0},e),this.recordedSteps=[],this.runindex=null,this.targetInfo={};var n=o.default.PAUSE,i=o.default.SHARENAME,a=window.location;window.addEventListener("load",function(e){var n=decodeURI(a.search);if(-1!==n.indexOf(i))for(var r=n.substr(1).split("&"),l=0;l<r.length;l++){var u=r[l],s=u.indexOf("=");if(s>-1){var c=function(){var e=u.substring(s+1),n=[];return e.split("__").forEach(function(e){var t=e.split("-"),r={x:t[0],y:t[1],id:t[2],text:t[3]};n.push(r)}),t.status=o.default.INITCOMPELETE,t.recordedSteps=n,"break"}();if("break"===c)break}}}),document.addEventListener(u,function(e){var n=document.getSelection().toString().trim();if(t.status!=o.default.WAITING||n!==t.targetInfo.text)if(n){var i=(0,r.getXY)(e),u=i.x,a=i.y;t.targetInfo={x:u,y:a,text:n,id:l.getUniqueId(e.target).wid},t.status=t.status===o.default.REPLAYING||t.status===o.default.PLAYANDWAIT?o.default.PLAYANDWAIT:o.default.WAITING}else t.targetInfo={},t.status=o.default.PAUSE}),this.onStateChange=function(){},this.record=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||this.status==o.default.WAITING?(this.status=o.default.RECORDING,this.recordedSteps.push(this.targetInfo),this.makelink(),this.status=o.default.RECORDED,!0):(console.log("当前状态不可记录"),!1)},this.remove=function(e){if(e<0)for(;this.recordedSteps.length>0;)this.replay(0,!0),this.recordedSteps.splice(0,1);else this.replay(e,!0),this.recordedSteps.splice(e,1);this.makelink()};var s=null,c=null;this.replay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments[2],i=this,u=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5e3;if((u=u||this.recordedSteps).length<e+1)this.status=o.default.REPLAYFINISHED;else{var d=u[e],f=d.x,h=d.y,p=d.id,v=d.text,g=p?l.getTarget(p):null;clearInterval(c),this.runindex=e,this.status=o.default.REPLAYING,d.isActive=!t;var y=f-window.innerWidth/2,m=h-window.innerHeight/2;c=(0,r.gotoPosition)(y,m,function(){i.runindex=null,n?s=setTimeout(function(){return i.replay(e+1,t,n,u,a)},a):(i.status=o.default.REPLAYFINISHED,clearTimeout(s))}),g&&(0,r.hightLightElement)(g,v,t)}},this.makelink=function(){try{var e="&"+i+"=",n=a.href,r=n.indexOf("&"+i);""==a.search&&(n+="?"),r>-1&&(n=n.substr(0,r)),0===t.recordedSteps.length?e="":(t.recordedSteps.forEach(function(t,n){0!=n&&(e+="__"),e+=t.x+"-"+t.y+"-"+(t.id&&t.id.length<15?t.id:"_")+"-"+t.text.substring(0,15)}),t.options.autoReplay&&(e+="&autoreplay=true")),history.pushState("",i,n+e)}catch(e){throw t.recordedSteps.splice(-1,1),Error("makelink faild",e)}},Object.defineProperty(this,"status",{get:function(){return n},set:function(e){n=e,t.onStateChange(n)}}),Object.defineProperty(this,"version",{value:"0.0.2"})};var r=n(0),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var l=new(i(n(4)).default),u="ontouchstart"in window?"touchend":"mouseup"},function(e,t,n){var r=n(8);e.exports=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={status:"",recordedSteps:e.recordedSteps,targetInfo:e.targetInfo,runindex:null,ballPos:{},showBall:!1},n={refershState:function(t){return function(t){return{status:e.status,recordedSteps:e.recordedSteps,targetInfo:e.targetInfo,runindex:e.runindex}}},setBallPos:function(e){return function(t){return{ballPos:e}}},toggleShowBall:function(e){return function(t){return{showBall:e}}}},u=function(e){var t=e.status,n=e.onclick;return(0,r.h)("button",{onclick:n},t===i.default.WAITING&&"记录此处",t===i.default.REPLAYING&&"结束播放后可进行记录",t===i.default.PLAYANDWAIT&&"结束播放后可进行记录")},a=function(t){var n=t.step,i=t.running,l=void 0!==i&&i,u=t.index;return(0,r.h)("span",{title:"点击",className:o.default.stepSign,style:{top:15*(u+1)+"px",transform:"scale("+(l?2:1)+")",background:n.isActive?"#cdef5b":"#b7b7b7"},onclick:function(){e.replay(u,n.isActive)}})},s=function(t){var n=t.step,i=(t.running,t.index);return(0,r.h)("div",{style:{position:"absolute",top:n.y+"px",left:n.x+"px"}},(0,r.h)("aside",{title:"点击查看",class:o.default.point+" "+(n.isActive?o.default.active:""),onclick:function(){e.replay(i,n.isActive)}},(0,r.h)("svg",{style:{position:"absolute",display:n.isActive?"":"none"},viewBox:"0 0 1024 1024",version:"1.1",width:"10",height:"10"},(0,r.h)("path",{d:"M192 448l640 0 0 128-640 0 0-128Z","p-id":"4227",fill:"#fff"}))),n.isActive&&(0,r.h)("div",{className:o.default.box},n.text,(0,r.h)("a",{className:o.default.delete,onclick:function(){return e.remove(i)},title:"删除"},(0,r.h)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"20",height:"20"},(0,r.h)("path",{d:"M223.595474 318.284043l24.022113 480.742089c0 54.376445 44.989657 98.456383 100.485599 98.456383l331.963601 0c55.494918 0 100.489692-44.078914 100.489692-98.456383l23.109324-480.742089L223.595474 318.284043zM831.749418 284.181341c0.099261-20.274766 0.158612-21.623483 0.158612-22.981411 0-52.871161-31.298843-81.888032-73.29533-81.888032l-116.892267 0.122797c0-27.751041-27.105335-50.245358-54.855352-50.245358L441.349917 129.189338c-27.744901 0-55.727209 22.494317-55.727209 50.245358l-117.013017-0.122797c-46.387493 0-73.29533 35.359322-73.29533 81.888032 0 1.363044 0.054235 2.706645 0.158612 22.981411l636.281561 0L831.749418 284.181341zM614.168937 444.615287c0-15.32708 12.421914-27.750017 27.744901-27.750017 15.32708 0 27.750017 12.422937 27.750017 27.750017l0 317.882907c0 15.328104-12.422937 27.751041-27.750017 27.751041-15.322987 0-27.744901-12.422937-27.744901-27.751041L614.168937 444.615287 614.168937 444.615287zM485.85862 444.615287c0-15.32708 12.42703-27.750017 27.751041-27.750017 15.32708 0 27.750017 12.422937 27.750017 27.750017l0 317.882907c0 15.328104-12.422937 27.751041-27.750017 27.751041-15.322987 0-27.751041-12.422937-27.751041-27.751041L485.85862 444.615287 485.85862 444.615287zM357.63733 444.615287c0-15.32708 12.422937-27.750017 27.751041-27.750017 15.321964 0 27.750017 12.422937 27.750017 27.750017l0 317.882907c0 15.328104-12.42703 27.751041-27.750017 27.751041-15.328104 0-27.751041-12.422937-27.751041-27.751041L357.63733 444.615287 357.63733 444.615287zM357.63733 444.615287",fill:"#fff"})))))};(0,r.app)(t,n,function(t,n){return(0,r.h)("div",{oncreate:function(){e.onStateChange=function(){n.refershState()},function(t){setTimeout(function(){t.refershState(),window.location.search.indexOf("autoreplay")>-1&&e.replay(0,!1,!0)},1e3)}(n)}},(0,r.h)("div",{style:{position:"absolute",left:t.targetInfo.x+"px",top:t.targetInfo.y+"px",transition:".5s"}},(t.status===i.default.WAITING||t.status===i.default.PLAYANDWAIT)&&(0,r.h)("span",null,(0,r.h)(u,{status:t.status,onclick:function(t){!function(t,n){t.stopPropagation(),t.preventDefault();var r=(0,l.getViewPosition)(t.currentTarget),o=r.top,i=r.left,u=(0,l.getViewPosition)(document.getElementById("easyshare-menu")),a=u.top,s=u.left,c=(a/s-o/i)/(s-i),d=a/s-c*s;n.toggleShowBall(!0);var f=setInterval(function(){i<=s?(o=c*(i+=s-i<=10?1:15)*i+d*i,n.setBallPos({left:i,top:o})):(n.toggleShowBall(!1),e.record(),clearInterval(f))},10)}(t,n)}}))),t.showBall&&(0,r.h)("div",{style:{position:"fixed",top:t.ballPos.top+"px",left:t.ballPos.left+"px",height:"20px",width:"20px",background:"#f36b5d",borderRadius:"8px"}}),(0,r.h)("div",null,t.recordedSteps.map(function(e,t){return(0,r.h)(s,{step:e,index:t})})),(0,r.h)("aside",{style:{position:"fixed",top:0,right:0}},(0,r.h)("div",{style:{position:"relative",right:"6px"}},t.recordedSteps.map(function(e,n){return(0,r.h)(a,{step:e,running:n===t.runindex,index:n})})),(0,r.h)("div",{title:"菜单",className:o.default.menu,id:"easyshare-menu",style:{visibility:t.recordedSteps.length>0?"visible":"hidden",top:15*t.recordedSteps.length+20+"px"},onclick:function(){e.remove(-1)}},(0,r.h)("svg",{viewBox:"0 0 8 16",version:"1.1",width:"20",height:"16","aria-hidden":"true"},(0,r.h)("path",{"fill-rule":"evenodd",d:"M8 4v1H0V4h8zM0 8h8V7H0v1zm0 3h8v-1H0v1z"})))))},document.body)};var r=n(6),o=u(n(7)),i=u(n(1)),l=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var a=document.createElement("style");a.innerHTML=".menu{\n      position:absolute;\n      right:0px;\n      width: 20px;\n      height: 18px;\n      transform: scale(1);\n      background: #e6e6e6;\n      border-radius: 25%;\n      text-align:center;\n      transition:.5s;\n      cursor:pointer;\n      box-shadow:0 2px 4px 0 rgba(0,0,0,.04)\n  }".replace(/\s*/g,""),document.head.appendChild(a)},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function o(e,t,n,r){var o,i=[].map,l=r&&r.children[0]||null,u=l&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(l),a=[],s=!0,c=v(e),d=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(y(t,c),r)),i&&i!==(n=y(t,c))&&!i.then&&p(c=g(t,v(n,i),c)),i}}(o,r[o]):e(t.concat(o),n[o]=v(n[o]),r[o]=v(r[o]));return r}([],c,v(t));return p(),d;function f(e){return"function"==typeof e?f(e(c,d)):null!=e?e:""}function h(){o=!o;var e=f(n);for(r&&!o&&(l=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var l=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);var o=t.attributes;if(o){o.oncreate&&a.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=f(t.children[i]),n));for(var l in o)x(r,l,o[l],null,n)}return r}(o,i);t.insertBefore(l,n),null!=r&&b(t,n,r),n=l}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in v(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&x(e,o,n[o],t[o],r);var i=s?n.oncreate:n.onupdate;i&&a.push(function(){i(e,t)})}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var u={},c={},d=[],h=r.children,p=o.children,g=0;g<h.length;g++){d[g]=n.childNodes[g];var y=m(h[g]);null!=y&&(u[y]=[d[g],h[g]])}for(var g=0,w=0;w<p.length;){var y=m(h[g]),I=m(p[w]=f(p[w]));if(c[y])g++;else if(null==I||I!==m(h[g+1]))if(null==I||s)null==y&&(e(n,d[g],h[g],p[w],i),w++),g++;else{var E=u[I]||[];y===I?(e(n,E[0],E[1],p[w],i),g++):E[0]?e(n,n.insertBefore(E[0],d[g]),E[1],p[w],i):e(n,d[g],null,p[w],i),c[I]=p[w],w++}else null==y&&b(n,d[g],h[g]),g++}for(;g<h.length;)null==m(h[g])&&b(n,d[g],h[g]),g++;for(var g in u)c[g]||b(n,u[g][0],u[g][1])}return n}(r,l,u,u=e)),s=!1;a.length;)a.pop()()}function p(){o||(o=!0,setTimeout(h))}function v(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function g(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?g(e.slice(1),t,n[e[0]]):t,v(n,r)):t}function y(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function m(e){return e?e.key:null}function w(e){return e.currentTarget.events[e.type](e)}function x(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),v(r,n)){var l=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,l):e.style[i]=l}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,w):e.removeEventListener(t,w)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function b(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}n.r(t),n.d(t,"h",function(){return r}),n.d(t,"app",function(){return o})},function(e,t,n){e.exports={box:"_3Dr",point:"zzj",active:"QVz",delete:"_2kz",menu:"_3lO",stepSign:"_3ls"}},function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,o=window.pageYOffset||r.scrollTop||n.scrollTop,i=window.pageXOffset||r.scrollLeft||n.scrollLeft,l=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,a=t.top+o-l,s=t.left+i-u;return{top:Math.round(a),left:Math.round(s)}}n.r(t);var o=window.document,i=function(){},l=function(){var e=function(t){this.options=Object.assign({},{draw:!0,simpleId:!0},t),this.lastClick=document.body;var n=this;document.addEventListener("mousedown",function(t){n.lastClick=t.target,n.focusedElement!==n.lastClick&&e.prototype.clean()})};return e}(),u=l.prototype;u.getUniqueId=function(e,t){if(!((e=e||this.lastClick)instanceof HTMLElement))return console.error("input is not a HTML element"),{};var n={wid:"",type:"",top:r(e).top,left:r(e).left,viewLeft:e.getBoundingClientRect().left,viewTop:e.getBoundingClientRect().top,text:e.innerText},i=e.id,a=e.name,s=e.tagName.toLowerCase(),c=e.type?e.type.toLowerCase():"",d="",f=e.classList||[];if(f.forEach(function(e){d+="."+e}),"body"!==s&&"html"!==s||(n.wid=s,n.type=s),i&&o.getElementById(i)===e){var h=new RegExp("^[a-zA-Z]+");!t&&this.options.simpleId?n.wid=i:h.test(i)&&(n.wid=s+"#"+i),n.type="document.getElementById()"}if(!n.wid&&a&&o.getElementsByName(a)[0]===e&&(n.wid=a,n.type="document.getElementsByName()"),!n.wid&&d&&o.querySelector(s+d)===e){n.wid=s+d,n.type="document.querySelector()";var p=f.length;if(p>2){for(var v=1,g=[];Math.pow(2,v)<p;)g.push(Math.pow(2,v)),v++;g.push(p);for(var y=0;y<g.length;y++)g[y]}}if("radio"===c){var m=s+"[value='"+e.value+"']";a&&(m+="[name='"+a+"']"),o.querySelector(m)===e&&(n.wid=m,n.type="document.querySelector()")}if(n.wid||(m=s,m=d?m+d:m,m=a?m+"[name='"+a+"']":m,u.getTarget(m)===e&&(n.wid=m,n.type="document.querySelector()")),!n.wid){m=s,m=d?m+d:m;var w=o.querySelectorAll(m);if(w&&w.length>0){for(var x=null,b=0;b<w.length;b++)if(e===w[b]){x=b+1;break}x&&(m=m+":nth-child("+x+")",o.querySelector(m)===e&&(n.wid=m,n.type="document.querySelector()"))}}if(!n.wid){if(!e.parentNode)return;var I=l.prototype.getUniqueId(e.parentNode,!0),E=I?I.wid:"";if(!E)return{wid:"",type:"NO_LOCATION"};var N=s;if(d&&(N+=d),m=E+">"+N,o.querySelectorAll(m).length>1){m=null;x=null;for(var S=0;S<e.parentNode.children.length;S++)if(e.parentNode.children[S]===e){x=S+1;break}if(x>=1)m=E+">"+N+":nth-child("+x+")",o.querySelector(m)!=e&&(m=null)}n.wid=m,n.type="document.querySelector()"}return this.focusedElement=u.getTarget(n.wid),!t&&this.options.draw&&this.__proto__.draw(n),n},u.getTarget=function(e){return o.getElementById(e)||o.getElementsByName(e)[0]||o.querySelector(e)},u.clean=i,u.draw=i,window.whatsElement=l;t.default=l}]);
//# sourceMappingURL=easyshare.js.map