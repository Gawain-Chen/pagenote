!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SHARENAME:"easyshare",WAITING:"WAITING",INITCOMPELETE:"INITCOMPELETE",RECORDING:"RECORDING",PAUSE:"PAUSE",RECORDED:"RECORDED",FINNISHED:"FINNISHED",REPLAYING:"REPLAYING",PLAYANDWAIT:"REPLAYINGANDWAITING",REPLAYFINISHED:"REPLAYFINISHED"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=i(n(2)),o=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=new r.default(e);return(0,o.default)(t),t}window.EasyShare=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;this.options=Object.assign({autoReplay:!0,hightligth:!0},e),this.recordedSteps=[],this.running=null,this.mPos={x:0,y:0};var n=o.default.PAUSE,i={},u=o.default.SHARENAME;window.addEventListener("load",function(e){var n=window.location.search;if(-1!==n.indexOf(u))for(var r=n.substr(1).split("&"),i=0;i<r.length;i++){var l=r[i];if(l.indexOf(u)>-1){var a=l.split("=");2===a.length&&function(){var e=[];a[1].split("a").forEach(function(t){var n={x:t.split("-")[0],y:t.split("-")[1]};e.push(n)}),t.status=o.default.INITCOMPELETE,t.recordedSteps=e}();break}}}),document.addEventListener(a,function(e){var n=document.getSelection().toString().trim();if(n!==i.text)if(n){var a=(0,r.getXY)(e),u=a.x,s=a.y,d=(0,r.getScroll)(),c=d.x,f=d.y;t.mPos={x:u,y:s},i={x:c,y:f,text:n,id:l.getUniqueId(e.target).wid},t.status=t.status===o.default.REPLAYING||t.status===o.default.PLAYANDWAIT?o.default.PLAYANDWAIT:o.default.WAITING}else i={},t.status=o.default.PAUSE}),this.onStateChange=function(){},this.record=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.status==o.default.WAITING?(this.status=o.default.RECORDING,this.recordedSteps.push(i),this.status=o.default.RECORDED,!0):(console.log("当前状态不可记录"),!1)},this.replay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((t=t||this.recordedSteps).length<e+1)return this.running=null,void(this.status=o.default.REPLAYFINISHED);var u=t[e],s=u.x,d=u.y,c=u.id,f=l.getTarget(c);f&&this.options.hightligth&&(0,r.hightLightElement)(f),this.running=e,this.status=o.default.REPLAYING,(0,r.gotoPosition)(s,d,function(){a&&setTimeout(function(){return n.replay(e+1,t)},i)})},this.makelink=function(){if(0!==t.recordedSteps.length){var e="&"+u+"=",n=window.location.href,r=n.indexOf("&"+u);t.recordedSteps.forEach(function(t,n){0!=n&&(e+="a"),e+=t.x+"-"+t.y}),""==window.location.search&&(n+="?"),r>-1&&(n=n.substr(0,r)),t.options.autoReplay&&(e+="&autoreplay=true"),history.pushState("",u,n+e)}},Object.defineProperty(this,"status",{get:function(){return n},set:function(e){n=e,t.onStateChange(n)}}),Object.defineProperty(this,"version",{value:"0.0.2"})};var r=n(3),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=new(i(n(4)).default)({draw:!1}),a="ontouchstart"in window?"touchend":"mouseup"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ontouchstart"in window?function(e){var t=e.touches[0]||e.changedTouches[0];return t?{x:t.pageX,y:t.pageY}:{x:0,y:0}}:function(e){return{x:(e=event||window.event).pageX||e.clientX+i().x,y:e.pageY||e.clientY+i().y}},o=document.documentElement||document.body;function i(){return{x:o.scrollLeft||o.scrollLeft,y:o.scrollTop||o.scrollTop}}t.gotoPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=setInterval(function(){var l=i(),a=l.x,u=l.y,s=e-a,d=t-u;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.scrollLeft=o.scrollLeft=e,o.scrollTop=o.scrollTop=t}(a+Math.floor(s/6),Math.floor(u+d/6));var c=i(),f=c.x;u===c.y&&a===f&&(clearInterval(r),n())},30)},t.getXY=r,t.hightLightElement=function(e){e.style.background="#e8d2bb"},t.getScroll=i},function(e,t,n){var r=n(5);e.exports=r},function(e,t,n){var r;!function(o,i){var l=o.document,a="whats-element",u=a+"-tip-container",s=a+"-tip-delete",d=a+"-copy",c=a+"-unique-container",f=a+"-unique-id",p=function(e){this.options=Object.assign({},{draw:!0},e),this.lastClick=l.body;var t=this;l.addEventListener("mousedown",function(e){t.lastClick=e.target,t.focusedElement!==t.lastClick&&h.clean()})},h=p.prototype;function v(){l.querySelectorAll("."+a+"-active").forEach(function(e){e.classList.remove(a+"-active")})}function g(e,t){var n=l.createElement(e||"div");return t&&(n.id=t),n}h.getUniqueId=function(e,t){if(!((e=e||this.lastClick)instanceof HTMLElement))return console.error("invalid input,not a HTML element"),null;var n={wid:"",type:""},r=e.id,o=e.name,i=e.tagName.toLowerCase(),a=e.type?e.type.toLowerCase():"",u="";if((e.classList||[]).forEach(function(e){u+="."+e}),"body"!==i&&"html"!==i||(n.wid=i,n.type=i),r&&l.getElementById(r)===e){var s=new RegExp("^[a-zA-Z]+");t?s.test(r)&&(n.wid=i+"#"+r):n.wid=r,n.type="byId"}if(!n.wid&&o&&l.getElementsByName(o)[0]===e&&(n.wid=o,n.type="byName"),!n.wid&&u&&l.querySelector(i+u)===e&&(n.wid=i+u,n.type="byClass"),"radio"===a){var d=i+"[value='"+e.value+"']";o&&(d+="[name='"+o+"']"),l.querySelector(d)===e&&(n.wid=d,n.type="byValue")}if(n.wid||(d=i,d=u?d+u:d,d=o?d+"[name='"+o+"']":d,h.getTarget(d)===e&&(n.wid=d,n.type="byMixed")),!n.wid){d=i,d=u?d+u:d;var c=l.querySelectorAll(d);if(c&&c.length>0){for(var f=null,v=0;v<c.length;v++)if(e===c[v]){f=v+1;break}f&&(d=d+":nth-child("+f+")",l.querySelector(d)===e&&(n.wid=d,n.type="byOrder"))}}if(!n.wid){var g=p.prototype.getUniqueId(e.parentNode,!0).wid;if(!g)return;var y=i;if(u&&(y+=u),d=g+">"+y,l.querySelectorAll(d).length>1){d=null,f=null;for(var x=0;x<e.parentNode.children.length;x++)if(e.parentNode.children[x]===e){f=x+1;break}f>=1&&(d=g+">"+y+":nth-child("+f+")",l.querySelector(d)!=e&&(d=null))}n.wid=d,n.type="byParent"}return this.focusedElement=h.getTarget(n.wid),!t&&this.options.draw&&p.prototype.draw(n),n},h.getTarget=function(e){return l.getElementById(e)||l.getElementsByName(e)[0]||l.querySelector(e)},h.draw=function(e){var t=h.getTarget(e.wid);if(t){var n=l.getElementById(u)?l.getElementById(u):g("aside",u);n.innerHTML="",n.addEventListener("mousedown",function(e){e.stopPropagation()});var r=g("div",s);r.innerText="x",r.onclick=function(e){e.stopPropagation(),p.prototype.clean()},n.appendChild(r);var i=g("div",c),a=g("input",f);a.readOnly=!0,a.className=e.type,a.value=e.wid;var y=g("div",d);y.setAttribute("query-type",e.type),y.innerText="复制",y.onclick=function(){a.select(),l.execCommand("Copy")},i.appendChild(a),i.appendChild(y),n.appendChild(i);var x=t.getBoundingClientRect().top+t.offsetHeight,m=t.getBoundingClientRect().left+o.screenX,b=m<100?m:m-(240|n.offsetWidth)/2+t.offsetWidth/2-l.body.getBoundingClientRect().left;n.style.left=b+"px",n.style.top=x+o.scrollY+10+"px",l.body.appendChild(n),v(),t.classList.add("whats-element-active")}else console.error("no this element:"+e.wid)},h.clean=function(){v();var e=l.getElementById(u);e&&(e.outerHTML="")},void 0!==o&&null!==o&&(o.whatsElement=p),void 0!==o&&null!==o||(this.whatsElement=p),void 0!==e&&e.exports&&(e.exports=p),void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r);var y=g("style"),x="#"+u+"{position:absolute;color:#8ed3fb;font-size:14px;z-index:1000;background-color:rgba(255, 255, 255,0.9);box-sizing:border-box;box-shadow:rgba(0, 0, 0, 0.2) 0px 1px 10px 3px;padding: 10px 20px;border-radius: 36px;}";x+="#"+s+"{cursor:pointer;position:absolute;top:-10px;width:20px;height: 20px;left:calc(50% - 8px);text-align:center;clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%);background:#fff;}",x+="#"+s+":hover{background:#fffbf0}",x+="#"+c+"{display:flex;justify-content:space-around;}",x+="#"+f+"{border:1px solid #d1d5da;box-shadow:inset 0 1px 2px rgba(27,31,35,0.075);text-indent:10px;}",x+="#"+d+"{background:aliceblue;cursor: pointer;}",x+="#"+d+"::after{position:absolute;z-index:1000000;padding: 0.1em 0.75em;color: #fff;text-align:center;text-shadow:none;text-transform:none;content:attr(query-type);background: #a88462;border-radius: 3px;opacity: 0;transition:all .5s}",x+="#"+d+":hover:after{display:inline-block;opacity: 1;}",x+=".whats-element-active{outline:red 1px dashed !important}",y.innerText=x,l.head.appendChild(y),o.whatsElement=p}(window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={status:"",recordedSteps:e.recordedSteps,mPos:{},running:null},n={refershState:function(t){return function(t){return{status:e.status,recordedSteps:e.recordedSteps,mPos:{x:e.mPos.x,y:e.mPos.y},running:e.running}}}},i=function(e){var t=e.status,n=e.onclick;return(0,r.h)("button",{onclick:n},t)},l=function(e){var t=e.step,n=e.running,o=void 0!==n&&n,i=e.index;return(0,r.h)("span",{style:{display:"block",position:"absolute",top:15*i+"px",right:o?"10px":"0px",width:o?"20px":"8px",height:o?"20px":"8px",background:o?"red":"pink",overflow:"hidden",borderRadius:"50%",textAlign:"center",transition:".5s"}},o&&t.text?t.text.substr(0,1):"")};(0,r.app)(t,n,function(t,n){return(0,r.h)("div",{oncreate:function(){e.onStateChange=function(){n.refershState()},function(t){setTimeout(function(){t.refershState(),window.location.search.indexOf("autoreplay")>-1&&e.replay()},1e3)}(n)}},(0,r.h)("div",{style:{position:"absolute",left:t.mPos.x+"px",top:t.mPos.y+"px",transition:".5s"}},(t.status===o.default.WAITING||t.status===o.default.PLAYANDWAIT)&&(0,r.h)("span",null,(0,r.h)(i,{status:t.status,onclick:function(){!function(t){e.record(),t.refershState()}(n)}}))),(0,r.h)("aside",{style:{position:"fixed",top:20,right:0}},(0,r.h)("div",{style:{position:"relative"}},t.recordedSteps.map(function(e,n){return(0,r.h)(l,{step:e,running:n===t.running,index:n})}),t.recordedSteps.length>0&&(0,r.h)("button",{onclick:e.makelink,style:{position:"absolute",right:0,top:15*t.recordedSteps.length+"px"}},"生成链接"))))},document.body)};var r=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0))},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function o(e,t,n,r){var o,i=[].map,l=r&&r.children[0]||null,a=l&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(l),u=[],s=!0,d=v(e),c=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(y(t,d),r)),i&&i!==(n=y(t,d))&&!i.then&&h(d=g(t,v(n,i),d)),i}}(o,r[o]):e(t.concat(o),n[o]=v(n[o]),r[o]=v(r[o]));return r}([],d,v(t));return h(),c;function f(e){return"function"==typeof e?f(e(d,c)):null!=e?e:""}function p(){o=!o;var e=f(n);for(r&&!o&&(l=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var l=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),o=t.attributes;if(o){o.oncreate&&u.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=f(t.children[i]),n));for(var l in o)b(r,l,o[l],null,n)}return r}(o,i);t.insertBefore(l,n),null!=r&&w(t,n,r),n=l}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in v(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&b(e,o,n[o],t[o],r);var i=s?n.oncreate:n.onupdate;i&&u.push(function(){i(e,t)})}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var a={},d={},c=[],p=r.children,h=o.children,g=0;g<p.length;g++){c[g]=n.childNodes[g],null!=(m=x(p[g]))&&(a[m]=[c[g],p[g]])}g=0;for(var y=0;y<h.length;){var m=x(p[g]),E=x(h[y]=f(h[y]));if(d[m])g++;else if(null==E||E!==x(p[g+1]))if(null==E||s)null==m&&(e(n,c[g],p[g],h[y],i),y++),g++;else{var N=a[E]||[];m===E?(e(n,N[0],N[1],h[y],i),g++):N[0]?e(n,n.insertBefore(N[0],c[g]),N[1],h[y],i):e(n,c[g],null,h[y],i),d[E]=h[y],y++}else null==m&&w(n,c[g],p[g]),g++}for(;g<p.length;)null==x(p[g])&&w(n,c[g],p[g]),g++;for(var g in a)d[g]||w(n,a[g][0],a[g][1])}return n}(r,l,a,a=e)),s=!1;u.length;)u.pop()()}function h(){o||(o=!0,setTimeout(p))}function v(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function g(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?g(e.slice(1),t,n[e[0]]):t,v(n,r)):t}function y(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function x(e){return e?e.key:null}function m(e){return e.currentTarget.events[e.type](e)}function b(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),v(r,n)){var l=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,l):e.style[i]=l}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,m):e.removeEventListener(t,m)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function w(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}n.r(t),n.d(t,"h",function(){return r}),n.d(t,"app",function(){return o})}]);
//# sourceMappingURL=easyshare.js.map