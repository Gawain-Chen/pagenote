!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=i(n(1)),r=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new o.default(e);return(0,r.default)(t),t}window.EasyShare=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;this.options=Object.assign({autoReplay:!0,hightligth:!0},e),this.recordedSteps=[],this.mousePosition={x:0,y:0};var n=i.default.PAUSE,a={};window.addEventListener("load",function(e){var n=window.location.search;if(-1!==n.indexOf("easyshare"))for(var o=n.substr(1).split("&"),r=0;r<o.length;r++){var i=o[r];if(i.indexOf("easyshare")>-1){var a=i.split("=");2===a.length&&function(){var e=[];a[1].split("a").forEach(function(t){var n={x:t.split("-")[0],y:t.split("-")[1]};e.push(n)}),t.replay(0,e)}();break}}}),document.addEventListener(l,function(e){var n=document.getSelection().toString().trim();if(n!==a.text)if(n){var o=(0,r.getXY)(e),l=o.x,u=o.y;t.mousePosition={x:l,y:u},t.status=i.default.WAITING,a={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop,text:n,id:s.getUniqueId(e.target).wid}}else a={},t.status=i.default.PAUSE;else console.log("不再监听")}),this.onStateChange=function(){console.log("changed state:"+n)},this.finished=function(){this.status=i.default.FINNISHED,this.setps=[]},this.record=function(e){this.status=i.default.RECORDING,this.recordedSteps.push(a),this.status=i.default.RECORDED,"function"==typeof e&&e()},this.replay=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1];if((n=n||this.recordedSteps).length<t+1)this.status=i.default.REPLAYFINISHED;else{var o=n[t],a=o.x,l=o.y,u=o.id,c=s.getTarget(u);c&&this.options.hightligth&&(0,r.hightLightElement)(c),this.status=i.default.REPLAYING,(0,r.getoPosition)(a,l,function(){e.options.autoReplay&&setTimeout(function(){return e.replay(t+1,n)},1e3)})}},this.makelink=function(){if(0!==t.recordedSteps.length){var n="&easyshare=";t.recordedSteps.forEach(function(e,t){0!=t&&(n+="a"),n+=e.x+"-"+e.y});var o=window.location.href,r=o.indexOf("&easyshare");""==window.location.search&&(o+="?"),r>-1&&(o=o.substr(0,r)),e.autoReplay&&(n+="&autoreplay=true"),history.pushState("","EasyShare 预览",o+n)}},Object.defineProperty(this,"status",{get:function(){return n},set:function(e){n=e,t.onStateChange(n)}}),Object.defineProperty(this,"version",{value:o.version})};var o=n(2),r=n(3),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var s=new(a(n(5)).default)({draw:!1}),l="ontouchstart"in window?"touchend":"mouseup"},function(e){e.exports={name:"easy-share",version:"0.0.2",description:"make your website more easy to share",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1',build:"webpack --config webpack.prod.js",start:"webpack-dev-server --open --config webpack.dev.js --host 0.0.0.0"},keywords:["website","share","guide"],author:"rowthan",license:"MIT",devDependencies:{"babel-core":"^6.24.0","babel-loader":"^7.0.0","babel-plugin-transform-react-jsx":"^6.24.1","babel-preset-env":"^1.7.0",webpack:"^4.20.2","webpack-cli":"^3.1.1","webpack-dev-server":"^3.1.9","webpack-merge":"^4.1.4"},dependencies:{hyperapp:"^1.2.9","whats-element":"^1.0.3"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="ontouchstart"in window?function(e){var t=e.touches[0]||e.changedTouches[0];return t?{x:t.pageX,y:t.pageY}:{x:0,y:0}}:function(e){return{x:(e=event||window.event).pageX||e.clientX+r().x,y:e.pageY||e.clientY+r().y}};function r(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}t.drawMenu=drawMenu,t.getoPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],o=setInterval(function(){var i=r(),a=i.x,s=i.y,l=e-a,u=t-s;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;document.documentElement.scrollLeft=document.body.scrollLeft=e,document.documentElement.scrollTop=document.body.scrollTop=t}(a+Math.floor(l/6),Math.floor(s+u/6));var c=r(),d=c.x;s===c.y&&a===d&&(clearInterval(o),n())},30)},t.getXY=o,t.hightLightElement=function(e){e.style.background="#e8d2bb"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EASYSHARECONTAINER:"easyshare-container",MENUID:"easyshare-menu",SHAREID:"easyshare-complete",WAITING:"WAITING",RECORDING:"RECORDING",PAUSE:"PAUSE",RECORDED:"RECORDED",FINNISHED:"FINNISHED",REPLAYING:"REPLAYING",REPLAYFINISHED:"REPLAYFINISHED"}},function(e,t,n){var o=n(6);e.exports=o},function(e,t,n){var o;!function(r,i){var a=r.document,s="whats-element",l=s+"-tip-container",u=s+"-tip-delete",c=s+"-copy",d=s+"-unique-container",f=s+"-unique-id",p=function(e){this.options=Object.assign({},{draw:!0},e),this.lastClick=a.body;var t=this;a.addEventListener("mousedown",function(e){t.lastClick=e.target,t.focusedElement!==t.lastClick&&h.clean()})},h=p.prototype;function y(){a.querySelectorAll("."+s+"-active").forEach(function(e){e.classList.remove(s+"-active")})}function v(e,t){var n=a.createElement(e||"div");return t&&(n.id=t),n}h.getUniqueId=function(e,t){if(!((e=e||this.lastClick)instanceof HTMLElement))return console.error("invalid input,not a HTML element"),null;var n={wid:"",type:""},o=e.id,r=e.name,i=e.tagName.toLowerCase(),s=e.type?e.type.toLowerCase():"",l="";if((e.classList||[]).forEach(function(e){l+="."+e}),"body"!==i&&"html"!==i||(n.wid=i,n.type=i),o&&a.getElementById(o)===e){var u=new RegExp("^[a-zA-Z]+");t?u.test(o)&&(n.wid=i+"#"+o):n.wid=o,n.type="byId"}if(!n.wid&&r&&a.getElementsByName(r)[0]===e&&(n.wid=r,n.type="byName"),!n.wid&&l&&a.querySelector(i+l)===e&&(n.wid=i+l,n.type="byClass"),"radio"===s){var c=i+"[value='"+e.value+"']";r&&(c+="[name='"+r+"']"),a.querySelector(c)===e&&(n.wid=c,n.type="byValue")}if(n.wid||(c=i,c=l?c+l:c,c=r?c+"[name='"+r+"']":c,h.getTarget(c)===e&&(n.wid=c,n.type="byMixed")),!n.wid){c=i,c=l?c+l:c;var d=a.querySelectorAll(c);if(d&&d.length>0){for(var f=null,y=0;y<d.length;y++)if(e===d[y]){f=y+1;break}f&&(c=c+":nth-child("+f+")",a.querySelector(c)===e&&(n.wid=c,n.type="byOrder"))}}if(!n.wid){var v=p.prototype.getUniqueId(e.parentNode,!0).wid;if(!v)return;var g=i;if(l&&(g+=l),c=v+">"+g,a.querySelectorAll(c).length>1){c=null,f=null;for(var m=0;m<e.parentNode.children.length;m++)if(e.parentNode.children[m]===e){f=m+1;break}f>=1&&(c=v+">"+g+":nth-child("+f+")",a.querySelector(c)!=e&&(c=null))}n.wid=c,n.type="byParent"}return this.focusedElement=h.getTarget(n.wid),!t&&this.options.draw&&p.prototype.draw(n),n},h.getTarget=function(e){return a.getElementById(e)||a.getElementsByName(e)[0]||a.querySelector(e)},h.draw=function(e){var t=h.getTarget(e.wid);if(t){var n=a.getElementById(l)?a.getElementById(l):v("aside",l);n.innerHTML="",n.addEventListener("mousedown",function(e){e.stopPropagation()});var o=v("div",u);o.innerText="x",o.onclick=function(e){e.stopPropagation(),p.prototype.clean()},n.appendChild(o);var i=v("div",d),s=v("input",f);s.readOnly=!0,s.className=e.type,s.value=e.wid;var g=v("div",c);g.setAttribute("query-type",e.type),g.innerText="复制",g.onclick=function(){s.select(),a.execCommand("Copy")},i.appendChild(s),i.appendChild(g),n.appendChild(i);var m=t.getBoundingClientRect().top+t.offsetHeight,b=t.getBoundingClientRect().left+r.screenX,w=b<100?b:b-(240|n.offsetWidth)/2+t.offsetWidth/2-a.body.getBoundingClientRect().left;n.style.left=w+"px",n.style.top=m+r.scrollY+10+"px",a.body.appendChild(n),y(),t.classList.add("whats-element-active")}else console.error("no this element:"+e.wid)},h.clean=function(){y();var e=a.getElementById(l);e&&(e.outerHTML="")},void 0!==r&&null!==r&&(r.whatsElement=p),void 0!==r&&null!==r||(this.whatsElement=p),void 0!==e&&e.exports&&(e.exports=p),void 0===(o=function(){return p}.call(t,n,t,e))||(e.exports=o);var g=v("style"),m="#"+l+"{position:absolute;color:#8ed3fb;font-size:14px;z-index:1000;background-color:rgba(255, 255, 255,0.9);box-sizing:border-box;box-shadow:rgba(0, 0, 0, 0.2) 0px 1px 10px 3px;padding: 10px 20px;border-radius: 36px;}";m+="#"+u+"{cursor:pointer;position:absolute;top:-10px;width:20px;height: 20px;left:calc(50% - 8px);text-align:center;clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%);background:#fff;}",m+="#"+u+":hover{background:#fffbf0}",m+="#"+d+"{display:flex;justify-content:space-around;}",m+="#"+f+"{border:1px solid #d1d5da;box-shadow:inset 0 1px 2px rgba(27,31,35,0.075);text-indent:10px;}",m+="#"+c+"{background:aliceblue;cursor: pointer;}",m+="#"+c+"::after{position:absolute;z-index:1000000;padding: 0.1em 0.75em;color: #fff;text-align:center;text-shadow:none;text-transform:none;content:attr(query-type);background: #a88462;border-radius: 3px;opacity: 0;transition:all .5s}",m+="#"+c+":hover:after{display:inline-block;opacity: 1;}",m+=".whats-element-active{outline:red 1px dashed !important}",g.innerText=m,a.head.appendChild(g),r.whatsElement=p}(window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={status:e.status,recordedSteps:e.recordedSteps,mousePosition:{x:e.mousePosition.x,y:e.mousePosition.y}},n={refershState:function(t){return function(t){return{status:e.status,recordedSteps:e.recordedSteps,mousePosition:{x:e.mousePosition.x,y:e.mousePosition.y}}}}},r=function(e){var t=e.status,n=e.onclick;return(0,o.h)("button",{onclick:n},t)};(0,o.app)(t,n,function(t,n){return(0,o.h)("div",{oncreate:e.onStateChange=function(){n.refershState(),console.log(t)}},(0,o.h)("div",{style:{position:"absolute",left:t.mousePosition.x+"px",top:t.mousePosition.y+"px",transition:".5s"}},"WAITING"==t.status&&(0,o.h)("span",null,(0,o.h)(r,{status:t.status,onclick:function(){!function(t){e.record(),t.refershState()}(n)}}),(0,o.h)("button",{onclick:e.makelink},"生成链接"))))},document.body)};var o=n(8)},function(e,t,n){"use strict";function o(e,t){for(var n=[],o=[],r=arguments.length;r-- >2;)n.push(arguments[r]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(r=i.length;r--;)n.push(i[r]);else null!=i&&!0!==i&&!1!==i&&o.push(i)}return"function"==typeof e?e(t||{},o):{nodeName:e,attributes:t||{},children:o,key:t&&t.key}}function r(e,t,n,o){var r,i=[].map,a=o&&o.children[0]||null,s=a&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(a),l=[],u=!0,c=y(e),d=function e(t,n,o){for(var r in o)"function"==typeof o[r]?function(e,r){o[e]=function(e){var i=r(e);return"function"==typeof i&&(i=i(g(t,c),o)),i&&i!==(n=g(t,c))&&!i.then&&h(c=v(t,y(n,i),c)),i}}(r,o[r]):e(t.concat(r),n[r]=y(n[r]),o[r]=y(o[r]));return o}([],c,y(t));return h(),d;function f(e){return"function"==typeof e?f(e(c,d)):null!=e?e:""}function p(){r=!r;var e=f(n);for(o&&!r&&(a=function e(t,n,o,r,i){if(r===o);else if(null==o||o.nodeName!==r.nodeName){var a=function e(t,n){var o="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),r=t.attributes;if(r){r.oncreate&&l.push(function(){r.oncreate(o)});for(var i=0;i<t.children.length;i++)o.appendChild(e(t.children[i]=f(t.children[i]),n));for(var a in r)w(o,a,r[a],null,n)}return o}(r,i);t.insertBefore(a,n),null!=o&&x(t,n,o),n=a}else if(null==o.nodeName)n.nodeValue=r;else{!function(e,t,n,o){for(var r in y(t,n))n[r]!==("value"===r||"checked"===r?e[r]:t[r])&&w(e,r,n[r],t[r],o);var i=u?n.oncreate:n.onupdate;i&&l.push(function(){i(e,t)})}(n,o.attributes,r.attributes,i=i||"svg"===r.nodeName);for(var s={},c={},d=[],p=o.children,h=r.children,v=0;v<p.length;v++){d[v]=n.childNodes[v],null!=(b=m(p[v]))&&(s[b]=[d[v],p[v]])}v=0;for(var g=0;g<h.length;){var b=m(p[v]),E=m(h[g]=f(h[g]));if(c[b])v++;else if(null==E||E!==m(p[v+1]))if(null==E||u)null==b&&(e(n,d[v],p[v],h[g],i),g++),v++;else{var S=s[E]||[];b===E?(e(n,S[0],S[1],h[g],i),v++):S[0]?e(n,n.insertBefore(S[0],d[v]),S[1],h[g],i):e(n,d[v],null,h[g],i),c[E]=h[g],g++}else null==b&&x(n,d[v],p[v]),v++}for(;v<p.length;)null==m(p[v])&&x(n,d[v],p[v]),v++;for(var v in s)c[v]||x(n,s[v][0],s[v][1])}return n}(o,a,s,s=e)),u=!1;l.length;)l.pop()()}function h(){r||(r=!0,setTimeout(p))}function y(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n}function v(e,t,n){var o={};return e.length?(o[e[0]]=e.length>1?v(e.slice(1),t,n[e[0]]):t,y(n,o)):t}function g(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function m(e){return e?e.key:null}function b(e){return e.currentTarget.events[e.type](e)}function w(e,t,n,o,r){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof o&&(o=e.style.cssText=""),y(o,n)){var a=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,a):e.style[i]=a}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?o||(o=e.events[t]):e.events={},e.events[t]=n,n?o||e.addEventListener(t,b):e.removeEventListener(t,b)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!r?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function x(e,t,n){function o(){e.removeChild(function e(t,n){var o=n.attributes;if(o){for(var r=0;r<n.children.length;r++)e(t.childNodes[r],n.children[r]);o.ondestroy&&o.ondestroy(t)}return t}(t,n))}var r=n.attributes&&n.attributes.onremove;r?r(t,o):o()}}n.r(t),n.d(t,"h",function(){return o}),n.d(t,"app",function(){return r})}]);
//# sourceMappingURL=easyshare.js.map