!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e){e.exports={a:"0.0.1"}},function(e,t,n){var o=n(2);e.exports=o},function(e,t,n){var o;!function(i,r){var l=i.document,s="whats-element",a=s+"-tip-container",d=s+"-tip-delete",c=s+"-copy",u=s+"-unique-container",p=s+"-unique-id",f=function(e){this.options=Object.assign({},{draw:!0},e),this.lastClick=l.body;var t=this;l.addEventListener("mousedown",function(e){t.lastClick=e.target,t.focusedElement!==t.lastClick&&y.clean()})},y=f.prototype;function h(){l.querySelectorAll("."+s+"-active").forEach(function(e){e.classList.remove(s+"-active")})}function g(e,t){var n=l.createElement(e||"div");return t&&(n.id=t),n}y.getUniqueId=function(e,t){if(!((e=e||this.lastClick)instanceof HTMLElement))return console.error("invalid input,not a HTML element"),null;var n={wid:"",type:""},o=e.id,i=e.name,r=e.tagName.toLowerCase(),s=e.type?e.type.toLowerCase():"",a="";if((e.classList||[]).forEach(function(e){a+="."+e}),"body"!==r&&"html"!==r||(n.wid=r,n.type=r),o&&l.getElementById(o)===e){var d=new RegExp("^[a-zA-Z]+");t?d.test(o)&&(n.wid=r+"#"+o):n.wid=o,n.type="byId"}if(!n.wid&&i&&l.getElementsByName(i)[0]===e&&(n.wid=i,n.type="byName"),!n.wid&&a&&l.querySelector(r+a)===e&&(n.wid=r+a,n.type="byClass"),"radio"===s){var c=r+"[value='"+e.value+"']";i&&(c+="[name='"+i+"']"),l.querySelector(c)===e&&(n.wid=c,n.type="byValue")}if(n.wid||(c=r,c=a?c+a:c,c=i?c+"[name='"+i+"']":c,y.getTarget(c)===e&&(n.wid=c,n.type="byMixed")),!n.wid){c=r,c=a?c+a:c;var u=l.querySelectorAll(c);if(u&&u.length>0){for(var p=null,h=0;h<u.length;h++)if(e===u[h]){p=h+1;break}p&&(c=c+":nth-child("+p+")",l.querySelector(c)===e&&(n.wid=c,n.type="byOrder"))}}if(!n.wid){var g=f.prototype.getUniqueId(e.parentNode,!0).wid;if(!g)return;var m=r;if(a&&(m+=a),c=g+">"+m,l.querySelectorAll(c).length>1){c=null,p=null;for(var x=0;x<e.parentNode.children.length;x++)if(e.parentNode.children[x]===e){p=x+1;break}p>=1&&(c=g+">"+m+":nth-child("+p+")",l.querySelector(c)!=e&&(c=null))}n.wid=c,n.type="byParent"}return this.focusedElement=y.getTarget(n.wid),!t&&this.options.draw&&f.prototype.draw(n),n},y.getTarget=function(e){return l.getElementById(e)||l.getElementsByName(e)[0]||l.querySelector(e)},y.draw=function(e){var t=y.getTarget(e.wid);if(t){var n=l.getElementById(a)?l.getElementById(a):g("aside",a);n.innerHTML="",n.addEventListener("mousedown",function(e){e.stopPropagation()});var o=g("div",d);o.innerText="x",o.onclick=function(e){e.stopPropagation(),f.prototype.clean()},n.appendChild(o);var r=g("div",u),s=g("input",p);s.readOnly=!0,s.className=e.type,s.value=e.wid;var m=g("div",c);m.setAttribute("query-type",e.type),m.innerText="复制",m.onclick=function(){s.select(),l.execCommand("Copy")},r.appendChild(s),r.appendChild(m),n.appendChild(r);var x=t.getBoundingClientRect().top+t.offsetHeight,b=t.getBoundingClientRect().left+i.screenX,v=b<100?b:b-(240|n.offsetWidth)/2+t.offsetWidth/2-l.body.getBoundingClientRect().left;n.style.left=v+"px",n.style.top=x+i.scrollY+10+"px",l.body.appendChild(n),h(),t.classList.add("whats-element-active")}else console.error("no this element:"+e.wid)},y.clean=function(){h();var e=l.getElementById(a);e&&(e.outerHTML="")},void 0!==i&&null!==i&&(i.whatsElement=f),void 0!==i&&null!==i||(this.whatsElement=f),void 0!==e&&e.exports&&(e.exports=f),void 0===(o=function(){return f}.call(t,n,t,e))||(e.exports=o);var m=g("style"),x="#"+a+"{position:absolute;color:#8ed3fb;font-size:14px;z-index:1000;background-color:rgba(255, 255, 255,0.9);box-sizing:border-box;box-shadow:rgba(0, 0, 0, 0.2) 0px 1px 10px 3px;padding: 10px 20px;border-radius: 36px;}";x+="#"+d+"{cursor:pointer;position:absolute;top:-10px;width:20px;height: 20px;left:calc(50% - 8px);text-align:center;clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%);background:#fff;}",x+="#"+d+":hover{background:#fffbf0}",x+="#"+u+"{display:flex;justify-content:space-around;}",x+="#"+p+"{border:1px solid #d1d5da;box-shadow:inset 0 1px 2px rgba(27,31,35,0.075);text-indent:10px;}",x+="#"+c+"{background:aliceblue;cursor: pointer;}",x+="#"+c+"::after{position:absolute;z-index:1000000;padding: 0.1em 0.75em;color: #fff;text-align:center;text-shadow:none;text-transform:none;content:attr(query-type);background: #a88462;border-radius: 3px;opacity: 0;transition:all .5s}",x+="#"+c+":hover:after{display:inline-block;opacity: 1;}",x+=".whats-element-active{outline:red 1px dashed !important}",m.innerText=x,l.head.appendChild(m),i.whatsElement=f}(window)},function(e,t,n){"use strict";n.r(t);var o=n(0),i={MENUID:"easyshare-menu",WAITING:"WAITING",RECORDING:"RECORDING",PAUSE:"PAUSE",RECORDED:"RECORDED",FINNISHED:"FINNISHED",REPLAYFINISHED:"REPLAYFINISHED"};const r=function(){const e=function(e,t,n){var o=document.createElement("button");return t&&(o.id=t),o.innerHTML="分享",o}(0,i.MENUID);e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.transition="0.5s",document.body.appendChild(e)};var l=n(1);const s=new(n.n(l).a)({draw:!1}),a="ontouchstart"in window?"touchend":"mouseup",d="ontouchstart"in window?e=>{const t=e.touches[0]||e.changedTouches[0];return t?{x:t.pageX,y:t.pageY}:{x:0,y:0}}:e=>({x:(e=event||window.event).pageX||e.clientX+c().x,y:e.pageY||e.clientY+c().y});function c(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}function u(e={autoReplay:!0,hightligth:!0}){this.options=e,this.steps=[],this.replayStep=null;let t=i.PAUSE,n={};r();const l=document.getElementById(i.MENUID);l.onclick=(e=>{if(this.status!==i.RECORDED){if(this.status!=i.WAITING)return alert("当前状态不可记录"),!1;this.record(),l.innerHTML=t}else console.log("已经记录")}),document.addEventListener(a,e=>{const t=function(e){return{text:document.getSelection().toString().trim(),id:s.getUniqueId(e.target)}}(e);if(t.text!==n.text)if(t.text){const{x:o,y:r}=d(e);l.style.transform=`translateX(${o}px) translateY(${r}px)`,l.style.display="block",this.status=i.WAITING,n={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop,text:t.text,id:t.id?t.id.wid:null}}else n={},l.style.display="none",this.status=i.PAUSE;else console.log("不再监听")}),this.finished=function(){this.status=i.FINNISHED,this.setps=[]},this.record=function(e){this.status=i.RECORDING,this.steps.push(n),this.status=i.RECORDED,"function"==typeof e&&e()},this.replay=function(t=0){if(this.steps.length<t+1)return;const{x:n,y:o,id:r}=this.steps[t],l=s.getTarget(r);l&&e.hightligth&&function(e){console.log("hightligth target"),e.style.background="#e8d2bb"}(l),function(e=0,t=0,n){const o=setInterval(function(){const{x:i,y:r}=c(),l=e-i,s=t-r;!function(e=0,t=0){document.documentElement.scrollLeft=document.body.scrollLeft=e,document.documentElement.scrollTop=document.body.scrollTop=t}(i+Math.floor(l/6),Math.floor(r+s/6));const{x:a,y:d}=c();r===d&&i===a&&(clearInterval(o),n())},30)}(n,o,()=>{this.steps.length!==t+1?e.autoReplay&&setTimeout(()=>this.replay(t+1),5e3):this.status=i.REPLAYFINISHED})},Object.defineProperty(this,"status",{get:()=>t,set:e=>{t=e,l.innerHTML=e}}),Object.defineProperty(this,"version",{value:o.a})}u.prototype.init=function(){console.log("init")},window.EasyShare=u}]);
//# sourceMappingURL=easyshare.js.map